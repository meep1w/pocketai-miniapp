<!DOCTYPE html>
<html lang="ru" data-theme="dark">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <title>PocketAI Mini App</title>
    <link rel="icon" type="image/svg+xml" href="static/img/Logo.svg" />
    <link rel="stylesheet" href="static/css/styles.css" />
</head>
<body>

<!-- Header -->
<header class="app-header">
    <div class="header-left">
        <button class="icon-btn" id="burgerBtn" aria-label="Открыть меню">
            <span class="icon icon-burger" aria-hidden="true"></span>
        </button>
    </div>

    <div class="header-logo">
        <!-- Лого подменяется по теме -->
        <img id="logoImg"
             alt="Logo"
             data-src-dark="static/img/Logo.svg"
             data-src-light="static/img/Logo_black.svg" />
    </div>

    <div class="header-right">
        <button class="icon-btn" id="rightIconBtn" aria-label="Premium">
            <span class="icon icon-crown" aria-hidden="true"></span>
        </button>
    </div>
</header>

<!-- Sidebar -->
<aside class="sidebar" id="sidebar">
    <div class="sidebar__head">
        <span class="sidebar__title" data-i18n="menu.title">Меню</span>
        <button class="icon-btn" id="closeSidebar" aria-label="Закрыть меню">✕</button>
    </div>
    <nav class="sidebar__nav">
        <button class="sidebar__item" id="nav-stats">
            <span class="sidebar__icon"><span class="icon icon-stats"></span></span>
            <span data-i18n="menu.stats">Ваша статистика</span>
        </button>
        <button class="sidebar__item" id="nav-lang">
            <span class="sidebar__icon"><span class="icon icon-globe"></span></span>
            <span data-i18n="menu.language">Выбор языка</span>
        </button>
        <button class="sidebar__item" id="nav-theme">
            <span class="sidebar__icon"><span class="icon icon-theme"></span></span>
            <span data-i18n="menu.theme">Тема</span>
        </button>
    </nav>
</aside>

<!-- Theme Modal -->
<div class="modal" id="themeModal" aria-hidden="true" role="dialog" aria-labelledby="themeTitle">
    <div class="modal__backdrop" data-close-modal></div>
    <div class="modal__dialog">
        <h3 class="modal__title" id="themeTitle" data-i18n="theme.title">Тема</h3>
        <div class="option-list">
            <button class="option-item" data-theme="dark">
                <span class="icon icon-moon"></span><span data-i18n="theme.dark">Тёмная</span>
            </button>
            <button class="option-item" data-theme="default">
                <span class="icon icon-auto"></span><span data-i18n="theme.default">По умолчанию</span>
            </button>
            <button class="option-item" data-theme="light">
                <span class="icon icon-sun"></span><span data-i18n="theme.light">Светлая</span>
            </button>
        </div>
        <button class="modal__close" data-close-modal data-i18n="btn.close">Закрыть</button>
    </div>
</div>

<!-- Premium Modal -->
<div class="modal" id="premiumModal" aria-hidden="true" role="dialog" aria-labelledby="premiumTitle">
    <div class="modal__backdrop" data-close-modal></div>
    <div class="modal__dialog modal__dialog--premium">
        <div class="premium-icons">
            <img src="static/img/base.svg" alt="" class="premium-icon">
            <img src="static/img/arrow.svg" alt="to" class="premium-arrow">
            <img src="static/img/Premium.svg" alt="" class="premium-icon">
        </div>

        <h3 class="modal__title" id="premiumTitle" data-i18n="premium.title">Получить Premium</h3>

        <p class="premium-sub" data-i18n="premium.desc">
            Чтобы получить Premium, соберите 150 сигналов. Premium даёт:
        </p>

        <ul class="premium-list">
            <li><span data-i18n="premium.b1">Новая модель анализа — TESSA Quantum</span></li>
            <li><span data-i18n="premium.b2">Полный доступ ко всем инструментам</span></li>
            <li><span data-i18n="premium.b3">Более высокая точность сигналов</span></li>
            <li><span data-i18n="premium.b4">Без лимита на сигналы</span></li>
        </ul>

        <button class="modal__close" data-close-modal data-i18n="btn.close">Закрыть</button>
    </div>
</div>

<!-- Instruments Modal -->
<div class="modal" id="instrumentsModal" aria-hidden="true" role="dialog" aria-labelledby="instrTitle">
    <div class="modal__backdrop" data-close-modal></div>
    <div class="modal__dialog modal__dialog--instruments">
        <h3 class="modal__title" id="instrTitle" data-i18n="instr.title">Выберите инструмент</h3>

        <div class="instr-search">
            <input id="instrSearch" class="instr-search__input" type="text" autocomplete="off" placeholder="Поиск…" />
            <span class="icon icon-search instr-search__icon" aria-hidden="true"></span>
        </div>

        <div class="instr-body">
            <aside class="instr-cats" id="instrCats" role="tablist" aria-label="Categories">
                <div class="instr-cats__title" data-i18n="instr.categories">КАТЕГОРИИ</div>
                <button class="instr-cat is-active" data-cat="currencies" role="tab" data-i18n="instr.currencies">Валюты</button>
                <button class="instr-cat" data-cat="crypto" role="tab" data-i18n="instr.crypto">Криптовалюты</button>
                <button class="instr-cat" data-cat="stocks" role="tab" data-i18n="instr.stocks">Акции</button>
                <button class="instr-cat" data-cat="commodities" role="tab" data-i18n="instr.commodities">Сырьё</button>
                <button class="instr-cat" data-cat="indices" role="tab" data-i18n="instr.indices">Индексы</button>
            </aside>

            <section class="instr-list" id="instrList" role="listbox" aria-label="Instruments"></section>
        </div>

        <button class="modal__close" data-close-modal data-i18n="btn.close">Закрыть</button>
    </div>
</div>

<!-- Timeframe Modal -->
<div class="modal" id="timeModal" aria-hidden="true" role="dialog" aria-labelledby="timeTitle">
    <div class="modal__backdrop" data-close-modal></div>
    <div class="modal__dialog modal__dialog--time">
        <h3 class="modal__title" id="timeTitle" data-i18n="time.title">Выберите время</h3>
        <div class="tf-list" id="tfList"></div>
        <button class="modal__close" data-close-modal data-i18n="btn.close">Закрыть</button>
    </div>
</div>

<!-- Expiration Modal -->
<div class="modal" id="expireModal" aria-hidden="true" role="dialog" aria-labelledby="expireTitle">
    <div class="modal__backdrop" data-close-modal></div>
    <div class="modal__dialog modal__dialog--expire">
        <h3 class="modal__title" id="expireTitle" data-i18n="expire.title">Время экспирации</h3>
        <div class="exp-list" id="expList"></div>
        <button class="modal__close" data-close-modal data-i18n="btn.close">Закрыть</button>
    </div>
</div>

<!-- Stats Modal -->
<div class="modal" id="statsModal" aria-hidden="true" role="dialog" aria-labelledby="statsTitle">
    <div class="modal__backdrop" data-close-modal></div>
    <div class="modal__dialog modal__dialog--stats">
        <h3 class="modal__title" id="statsTitle" data-i18n="stats.title">Your Statistics</h3>

        <div class="stats-rows">
            <div class="stats-row">
                <div class="key" data-i18n="stats.tariff">Your tariff:</div>
                <div class="val" id="stTariff">Base</div>
            </div>
            <div class="stats-row">
                <div class="key" data-i18n="stats.received">Signals received:</div>
                <div class="val" id="stCount">0</div>
            </div>
            <div class="stats-row">
                <div class="key" data-i18n="stats.accuracy">Signal accuracy:</div>
                <div class="val" id="stAvg">0%</div>
            </div>
        </div>

        <button class="modal__close" data-close-modal data-i18n="btn.close">Close</button>
    </div>
</div>


<!-- Language Modal -->
<div class="modal" id="langModal" aria-hidden="true" role="dialog" aria-labelledby="langTitle">
    <div class="modal__backdrop" data-close-modal></div>
    <div class="modal__dialog modal__dialog--lang">
        <h3 class="modal__title" id="langTitle" data-i18n="lang.title">Choose Language</h3>

        <div class="lang-grid">
            <button class="lang-opt" data-lang="ru" aria-pressed="false">
                <img src="static/img/lang/ru.svg" alt="" class="lang-flag" />
                <span data-i18n="lang.ru">Русский</span>
            </button>

            <button class="lang-opt" data-lang="en" aria-pressed="false">
                <img src="static/img/lang/en.svg" alt="" class="lang-flag" />
                <span data-i18n="lang.en">English</span>
            </button>
        </div>

        <button class="modal__close" data-close-modal data-i18n="btn.close">Close</button>
    </div>
</div>


<!-- Content -->
<main class="app-main">
    <section class="select-blocks">
        <!-- Instrument -->
        <div class="ui-field" id="field-instrument" role="button" tabindex="0"
             aria-haspopup="dialog" aria-controls="instrumentsModal" aria-label="Select instrument">
            <label class="ui-field__label" data-i18n="label.select_instrument">Выберите инструмент</label>
            <div class="ui-field__box">
                <span class="ui-field__placeholder" data-i18n="ph.select_instrument">Выберите инструмент</span>
            </div>
        </div>
        <!-- Timeframe -->
        <div class="ui-field" id="field-time" role="button" tabindex="0"
             aria-haspopup="dialog" aria-controls="timeModal" aria-label="Select time">
            <label class="ui-field__label" data-i18n="label.select_time">Выберите время</label>
            <div class="ui-field__box">
                <span class="ui-field__placeholder" data-i18n="ph.select_time">Выберите время</span>
            </div>
        </div>
        <!-- Expiration -->
        <div class="ui-field" id="field-expiration" role="button" tabindex="0"
             aria-haspopup="dialog" aria-controls="expireModal" aria-label="Expiration time">
            <label class="ui-field__label" data-i18n="label.expiration_time">Время экспирации</label>
            <div class="ui-field__box">
                <span class="ui-field__placeholder" data-i18n="ph.expiration_time">Выберите время сделки</span>
                <span class="ui-badge ui-badge--warn" id="expBadge" hidden data-i18n="expire.warn_short">Низкая точность</span>
            </div>
        </div>
    </section>

    <!-- Actions -->
    <section class="actions">
        <button id="getSignalBtn" class="btn btn-primary btn-lg" data-i18n="btn.get_signal">Получить сигнал</button>
    </section>

    <!-- Signal card -->
    <section class="signal-card" id="signalCard" data-state="idle">
        <div class="signal-head">
            <div class="signal-title">
                <span class="icon icon-signal"></span>
                <span data-i18n="signal.title">Сигнал</span>
            </div>
            <div class="signal-model" data-i18n="signal.model">Модель: TESSA</div>
        </div>

        <div class="signal-body">
            <div id="signalIdle" class="signal-idle">
                <span data-i18n="signal.idle">Получить сигнал</span>
            </div>

            <div id="signalLoading" class="signal-loading" >
                <img src="static/img/loader.gif" alt="" class="signal-loader">
                <div class="signal-loading-text" data-i18n="signal.analyzing">Анализ...</div>
            </div>

            <div id="signalResult" class="signal-result" >
                <div class="signal-inst" id="sigInstrument">—</div>
                <div class="signal-action" id="sigAction">BUY</div>
                <div class="signal-meta">
                    <div><span data-i18n="signal.exp">Время сделки:</span> <b id="sigExp">—</b></div>
                    <div><span data-i18n="signal.acc">Точность:</span> <b id="sigAcc">—%</b></div>
                    <div class="signal-received"><span data-i18n="signal.received">Получено в:</span> <span id="sigTime">—</span></div>
                </div>
                <div class="signal-warn" id="sigWarn" hidden data-i18n="signal.low_acc_warn">Низкая точность: будьте аккуратнее.</div>
            </div>
    </section>

    <!-- Reset link (показываем только когда есть результат) -->
    <section class="reset-wrap" id="resetWrap" hidden>
        <button id="resetBtn" class="btn-link" data-i18n="btn.reset">Сбросить</button>
    </section>

</main>

<script src="static/js/header.js"></script>
</body>
</html>
