<!doctype html>
<html lang="ru" data-theme="dark">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>PocketAI — Mini App</title>
    <link rel="stylesheet" href="static/css/styles.css">
</head>
<body>

<!-- ===== Header ===== -->
<header class="app-header">
    <button id="burgerBtn" class="icon-btn" aria-label="Menu">
        <!-- burger.svg у тебя чёрный → делаем icon-src-black -->
        <img src="static/img/burger.svg" alt="" class="icon-src-white">
    </button>


    <div class="header-center">
        <img id="logoImg" class="logo"
             src="static/img/Logo.svg"
             data-src-dark="static/img/Logo.svg"
             data-src-light="static/img/Logo_black.svg"
             alt="PocketAI">
    </div>

    <button id="rightIconBtn" class="icon-btn" aria-label="Info">
        <img src="static/img/base.svg" class="" alt="">

    </button>
</header>

<!-- ===== Sidebar ===== -->
<aside id="sidebar" class="sidebar">
    <div class="sidebar__head">
        <div class="title" data-i18n="menu.title">Меню</div>
        <button id="closeSidebar" class="icon-btn" aria-label="Close">✕</button>
    </div>
    <nav class="menu">
        <button id="nav-stats" class="menu-item">
            <img src="static/img/icons/stats.svg" alt="" class="icon-src-white">
            <span data-i18n="menu.stats">Ваша статистика</span>
        </button>
        <button id="nav-lang" class="menu-item">
            <img src="static/img/icons/globe.svg" alt="" class="icon-src-white">
            <span data-i18n="menu.language">Выбор языка</span>
        </button>
        <button id="nav-theme" class="menu-item">
            <img src="static/img/icons/theme.svg" alt="" class="icon-src-white">
            <span data-i18n="menu.theme">Тема</span>
        </button>
    </nav>
</aside>

<!-- ===== Page ===== -->
<main class="page">

    <!-- Поля выбора -->
    <section id="controls" class="controls">
        <!-- Инструмент -->
        <div class="ui-field" id="field-instrument" role="button" tabindex="0"
             aria-haspopup="dialog" aria-controls="instrumentsModal">
            <label class="ui-field__label" data-i18n="label.select_instrument">Выберите инструмент</label>
            <div class="ui-field__box">
                <span class="ui-field__placeholder" data-i18n="ph.select_instrument">Выберите инструмент</span>
            </div>
        </div>

        <!-- Модель (TESSA Plus доступна, Quantum disabled в модалке) -->
        <div class="ui-field" id="field-model" role="button" tabindex="0"
             aria-haspopup="dialog" aria-controls="modelModal">
            <label class="ui-field__label" data-i18n="label.select_model">Выберите модель</label>
            <div class="ui-field__box">
                <span class="ui-field__placeholder" data-i18n="ph.select_model">Выберите модель</span>
            </div>
        </div>

        <!-- Время сделки -->
        <div class="ui-field" id="field-expiration" role="button" tabindex="0"
             aria-haspopup="dialog" aria-controls="expireModal">
            <label class="ui-field__label" data-i18n="label.expiration_time">Время экспирации</label>
            <div class="ui-field__box">
                <span class="ui-field__placeholder" data-i18n="ph.expiration_time">Выберите время сделки</span>
            </div>
        </div>

        <!-- Старт -->
        <button id="getSignalBtn" class="primary-btn" data-i18n="btn.get_signal">Получить сигнал</button>
    </section>

    <!-- Карточка сигнала (поток как у VIP) -->
    <section id="signalCard" class="vip-card" aria-live="polite">
        <div class="vip-card__head">
            <div class="ttl">
                <img src="static/img/icons/signal.svg" alt="">
                <span data-i18n="signal.title">Сигнал</span>
            </div>
            <div class="model signal-model">Модель: <span id="signalModelName">—</span></div>
        </div>

        <!-- До старта -->
        <div id="idleView" class="idle">
            <div class="idle__text" data-i18n="signal.idle">Получить сигнал</div>
        </div>

        <!-- Шаги анализа -->
        <div id="analysisSteps" class="steps" hidden>
            <div class="step" data-step="1">
                <div class="step__icon"></div>
                <div class="step__content">
                    <div class="step__title" data-i18n="an.step1">Технический анализ</div>
                    <div class="step__sub" data-i18n="an.step1_sub">Индикаторы и уровни S/R</div>
                </div>
                <div class="step__state"></div>
            </div>

            <div class="step" data-step="2">
                <div class="step__icon"></div>
                <div class="step__content">
                    <div class="step__title" data-i18n="an.step2">Распознавание паттернов</div>
                    <div class="step__sub" data-i18n="an.step2_sub">Тренды и фигуры</div>
                </div>
                <div class="step__state"></div>
            </div>

            <div class="step" data-step="3">
                <div class="step__icon"></div>
                <div class="step__content">
                    <div class="step__title" data-i18n="an.step3">Математические расчёты</div>
                    <div class="step__sub" data-i18n="an.step3_sub">Вероятности и риски</div>
                </div>
                <div class="step__state"></div>
            </div>

            <div class="step" data-step="4">
                <div class="step__icon"></div>
                <div class="step__content">
                    <div class="step__title" data-i18n="an.step4">Генерация сигнала</div>
                    <div class="step__sub" data-i18n="an.step4_sub">Финальная сборка</div>
                </div>
                <div class="step__state"></div>
            </div>

            <div class="progress"><div id="progressBar" class="progress__bar"></div></div>
            <div id="progressText" class="progress__text">0%</div>
        </div>

        <!-- Результат -->
        <div id="resultView" class="result" hidden>
            <div class="dir-wrap">
                <div id="dirArrow" class="dir-arrow up"></div>
                <div id="dirText" class="dir-text up">UP</div>
            </div>

            <!-- 2 колонки × 3 блока -->
            <div class="info-grid info-2x3">
                <!-- слева -->
                <div class="info">
                    <div class="key" data-i18n="res.market">Рынок:</div>
                    <div class="val">OTC</div>
                </div>
                <!-- справа -->
                <div class="info">
                    <div class="key" data-i18n="res.confidence">Уверенность:</div>
                    <div id="resConf" class="val">—%</div>
                </div>

                <!-- слева -->
                <div class="info">
                    <div class="key" data-i18n="res.time">Время:</div>
                    <div id="resTime" class="val">—</div>
                </div>
                <!-- справа -->
                <div class="info">
                    <div class="key" data-i18n="res.strength">Сила:</div>
                    <div id="resStrength" class="val">—</div>
                </div>

                <!-- слева -->
                <div class="info">
                    <div class="key" data-i18n="res.pair">Пара:</div>
                    <div id="resPair" class="val">—</div>
                </div>
                <!-- справа -->
                <div class="info" data-i18n="res.valid_until">
                    <div class="key">Действует до:</div>
                    <div id="resValid" class="val">—:—</div>
                </div>
            </div>

            <!-- одна строка на два блока -->
            <div class="info-grid row-2col">
                <div class="info badge-block">
                    <div id="resAcc" class="big">—%</div>
                    <div class="sub" data-i18n="lbl.accuracy">точность</div>
                </div>
                <div class="info badge-block">
                    <div id="resVol" class="big">Low</div>
                    <div class="sub" data-i18n="lbl.volume">объём</div>
                </div>
            </div>

            <!-- полный ряд -->

        </div>
    </section>


    <!-- стало -->
    <div id="actionWrap" class="reset-wrap" hidden>
        <div class="actions">
            <button id="repeatBtn" class="repeat-btn" data-i18n="btn.repeat">Повторить</button>
            <button id="resetBtn" class="reset-btn" data-i18n="btn.reset">Сбросить</button>
        </div>
    </div>
</main>

<!-- ===== Modals ===== -->

<!-- Instruments modal -->
<div class="modal" id="instrumentsModal" aria-hidden="true" role="dialog" aria-labelledby="instrTitle">
    <div class="modal__backdrop" data-close-modal></div>
    <div class="modal__dialog modal__dialog--instr">
        <h3 class="modal__title" id="instrTitle" data-i18n="instr.title">Выберите инструмент</h3>

        <!-- Поиск сверху -->
        <div class="instr__search">
            <div class="search">
                <img src="static/img/icons/search.svg" alt="" class="icon-src-white">
                <input id="instrSearch" type="text" placeholder="Search...">
            </div>
        </div>

        <div class="instr__layout">
            <aside class="instr__cats">
                <div class="cats-title" data-i18n="instr.categories">КАТЕГОРИИ</div>
                <button class="instr-cat is-active" data-cat="currencies" type="button" data-i18n="instr.currencies">Валюты</button>
                <button class="instr-cat" data-cat="crypto"      type="button" data-i18n="instr.crypto">Криптовалюты</button>
                <button class="instr-cat" data-cat="stocks"      type="button" data-i18n="instr.stocks">Акции</button>
                <button class="instr-cat" data-cat="commodities" type="button" data-i18n="instr.commodities">Сырьё</button>
                <button class="instr-cat" data-cat="indices"     type="button" data-i18n="instr.indices">Индексы</button>
            </aside>

            <div class="instr__list">
                <div id="instrList" class="items"></div>
            </div>
        </div>

        <button class="modal__close" data-close-modal data-i18n="btn.close">Закрыть</button>
    </div>
</div>

<!-- Model modal -->
<div class="modal" id="modelModal" aria-hidden="true" role="dialog" aria-labelledby="modelTitle">
    <div class="modal__backdrop" data-close-modal></div>
    <div class="modal__dialog modal__dialog--model">
        <h3 class="modal__title" id="modelTitle" data-i18n="model.title">Выберите модель</h3>
        <div id="modelList" class="model-list"><!-- генерится в JS --></div>
        <button class="modal__close" data-close-modal data-i18n="btn.close">Закрыть</button>
    </div>
</div>

<!-- Expiration modal -->
<div class="modal" id="expireModal" aria-hidden="true" role="dialog" aria-labelledby="expTitle">
    <div class="modal__backdrop" data-close-modal></div>
    <div class="modal__dialog modal__dialog--exp">
        <h3 class="modal__title" id="expTitle" data-i18n="expire.title">Время экспирации</h3>
        <div id="expList" class="exp-list"></div>
        <button class="modal__close" data-close-modal data-i18n="btn.close">Закрыть</button>
    </div>
</div>

<!-- Theme modal -->
<div class="modal" id="themeModal" aria-hidden="true" role="dialog" aria-labelledby="themeTitle">
    <div class="modal__backdrop" data-close-modal></div>
    <div class="modal__dialog modal__dialog--theme">
        <h3 class="modal__title" id="themeTitle" data-i18n="theme.title">Тема</h3>
        <div class="theme-list">
            <button class="option-item" data-theme="dark"><img src="static/img/icons/moon.svg" alt=""><span data-i18n="theme.dark">Тёмная</span></button>
            <button class="option-item" data-theme="default"><img src="static/img/icons/auto.svg" alt=""><span data-i18n="theme.default">По умолчанию</span></button>
            <button class="option-item" data-theme="light"><img src="static/img/icons/sun.svg" alt=""><span data-i18n="theme.light">Светлая</span></button>
        </div>
        <button class="modal__close" data-close-modal data-i18n="btn.close">Закрыть</button>
    </div>
</div>

<!-- Language modal -->
<div class="modal" id="langModal" aria-hidden="true" role="dialog" aria-labelledby="langTitle">
    <div class="modal__backdrop" data-close-modal></div>
    <div class="modal__dialog modal__dialog--lang">
        <h3 class="modal__title" id="langTitle">Choose Language</h3>
        <div class="lang-grid">
            <button class="lang-opt" data-lang="ru"><img src="static/img/lang/ru.svg" class="lang-flag" alt=""><span>Русский</span></button>
            <button class="lang-opt" data-lang="en"><img src="static/img/lang/en.svg" class="lang-flag" alt=""><span>English</span></button>
            <button class="lang-opt" data-lang="es" aria-pressed="false"> <img src="static/img/lang/es.svg" alt="" class="lang-flag"><span>Español</span></button>
            <button class="lang-opt" data-lang="hi" aria-pressed="false"><img src="static/img/lang/hi.svg" alt="" class="lang-flag"><span>हिन्दी</span></button>
        </div>
        <button class="modal__close" data-close-modal data-i18n="btn.close">Close</button>
    </div>
</div>

<!-- Stats modal -->
<div class="modal" id="statsModal" aria-hidden="true" role="dialog" aria-labelledby="statsTitle">
    <div class="modal__backdrop" data-close-modal></div>
    <div class="modal__dialog modal__dialog--stats">
        <h3 class="modal__title" id="statsTitle" data-i18n="stats.title">Ваша статистика</h3>
        <div class="stats-rows">
            <div class="stats-row"><div class="key" data-i18n="stats.tariff">Ваш тариф:</div><div class="val" id="stTariff" data-i18n="stats.base">Base</div></div>
            <div class="stats-row"><div class="key" data-i18n="stats.received">Сигналов получено:</div><div class="val" id="stCount">0</div></div>
            <div class="stats-row"><div class="key" data-i18n="stats.accuracy">Средняя точность:</div><div class="val" id="stAvg">0%</div></div>
        </div>
        <button class="modal__close" data-close-modal data-i18n="btn.close">Закрыть</button>
    </div>
</div>

<!-- VIP info modal -->
<div class="modal" id="vipInfoModal" aria-hidden="true" role="dialog" aria-labelledby="vipInfoTitle">
    <div class="modal__backdrop" data-close-modal></div>
    <div class="modal__dialog modal__dialog--vip">
        <div class="vipinfo-hero">
            <img src="static/img/base.svg" alt="Base" class="vipinfo-ic">
            <img src="static/img/arrow.svg" alt="→" class="vipinfo-arr">
            <img src="static/img/Premium.svg" alt="VIP" class="vipinfo-ic">
        </div>

        <h3 class="modal__title" id="vipInfoTitle" data-i18n="vipinfo.title">Base / PLATINUM</h3>

        <p class="vipinfo-note" data-i18n="vipinfo.note">
            Для получения тарифа VIP, свяжитесь с поддержкой, указанной в боте.
        </p>

        <div class="vipinfo-list">
            <div class="vipinfo-item" data-i18n="vipinfo.b1">Точность сигналов выше с Platinum</div>
            <div class="vipinfo-item" data-i18n="vipinfo.b2">Открытие ещё трёх категорий</div>
            <div class="vipinfo-item" data-i18n="vipinfo.b3">Приоритетная поддержка</div>
            <div class="vipinfo-item" data-i18n="vipinfo.b4">Новая модель аналитики рынка для выдачи сигналов</div>
        </div>

        <button class="modal__close" data-close-modal data-i18n="btn.close">Закрыть</button>
    </div>
</div>


<!-- ===== Scripts ===== -->
<script src="static/js/header.js"></script>
</body>
</html>
